!function(e,t){"use strict";"function"==typeof define&&define.amd?define("Intermediary",[],t):"object"==typeof exports?module.exports=t():e.Intermediary=t()}(this,function(){"use strict";function e(t){for(var n in t._channels)t._channels.hasOwnProperty(n)&&(e(t._channels[n]),delete t._channels[n]);t.removeSubscriber()}function t(e,t){if(null==e||""===e)return null;for(var n=s,i=e.split(":"),r=0,o=i.length;o>r&&null!=n;){if(n.hasChannel(i[r]))n=n.returnChannel(i[r]);else{if(t)break;n=n.addChannel(i[r])}r++}return""===n.namespace?null:n}function n(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(e,t){return e.options.priority>t.options.priority?-1:e.options.priority<t.options.priority?1:0}function r(e,t,i){this.id=n(),this.callback=e,this.context=t,this.options=i,this.channel=null}function o(e,t,n){this.namespace=e||"",this.id=n,this._subscribers=[],this._channels={},this._parent=t,this._stopped=!1}o.prototype={addChannel:function(e){var t=(""===this.namespace?"":this.namespace+":")+e,n=new o(t,this,e);return this._channels[e]=n,n},addSubscriber:function(e,t,n){null==n&&(n={}),null==n.priority?n.priority=0:n.priority=0|n.priority;var o=new r(e,t,n);return o.channel=this,this._subscribers.push(o),this._subscribers.sort(i),o},autoRemoveChannel:function(){if(0===this._subscribers.length){for(var e in this._channels)if(this._channels.hasOwnProperty(e))return;null!=this._parent&&this._parent.removeChannel(this.id)}},hasChannel:function(e){return this._channels.hasOwnProperty(e)},publish:function(e){for(var t=0,n=this._subscribers.length,i=n;n>t;){var r=!1,o=this._subscribers[t],s=o.options;r=null!=s&&null!=s.predicate?s.predicate.apply(o.context,e):!0,r&&(null!=s&&null!=s.calls&&(s.calls--,s.calls<1&&this.removeSubscriber(o.id)),o.callback.apply(o.context,e),this._subscribers.length!=i&&(t-=i-this._subscribers.length,i=n=this._subscribers.length)),t++}null!=this._parent&&this._parent.publish(e)},removeChannel:function(e){this.hasChannel(e)&&(this._channels[e]=null,delete this._channels[e],this.autoRemoveChannel())},removeSubscriber:function(e){var t=!1,n=0,i=0;if(null==e){for(n=0,i=this._subscribers.length;i>n;n++)this._subscribers[n].channel=null;this._subscribers=[],t=!0}else for(n=this._subscribers.length-1;n>=0&&!t;)this._subscribers[n].id===e&&(this._subscribers[n].channel=null,t=!0,this._subscribers.splice(n,1)),n--;return this.autoRemoveChannel(),t},returnChannel:function(e){return this._channels[e]},returnSubscriber:function(e){for(var t,n=this._subscribers.length-1;n>=0&&null==t;)this._subscribers[n].id===e&&(t=this._subscribers[n]),n--;return t},setSubscriberPriority:function(e,t){var n=this.returnSubscriber(e);return null==n?!1:(n.options.priority=0|t,this._subscribers.sort(i),!0)}};var s=new o("");return{getSubscriber:function(e,n){var i=t(e,!0);return null==i||i.namespace!==e?null:i.returnSubscriber(n)},once:function(e,t,n,i){return i=i||{},i.calls=1,this.subscribe(e,t,n,i)},publish:function(e){var n=t(e,!0);if(null==n)return null;var i=Array.prototype.slice.call(arguments,1);return 0===i.length&&i.push(null),i.push(e),n.publish(i),!0},reset:function(){e(s)},setSubscriberPriority:function(e,n,i){var r=t(e,!0);return null==r||r.namespace!=e?null:r.setSubscriberPriority(n,i)},subscribe:function(e,n,i,r){var o=t(e,!1);return null==o||o.namespace!=e?null:(i=i||{},r=r||{},o.addSubscriber(n,i,r).id)},unsubscribe:function(e,n){var i=t(e,!0);return null==i||i.namespace!==e?null:i.removeSubscriber(n)}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("CodeInput",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.CodeInput=t(e.Intermediary)}(this,function(e){"use strict";function t(){var t=h.querySelector("textarea");return null==t?!1:""===t.value?(e.publish("notification:info",{level:1,message:"There is no text in the textarea"}),!1):(f("textarea"),d(t.value),!0)}function n(t){e.publish("notification:info",{level:9,message:'Starting download of "'+t.name+'"'}),g=new FileReader,g.onerror=c,g.onload=u,g.readAsText(t)}function i(e){var t=/javascript/i;if(e.target.files.length>0){var i=e.target.files[0];p(t.test(i.type)?i:null),y&&n(b)}y=!1}function r(i){if(e.publish("notification:clear",{}),null==b){if(!t()){var r=h.querySelector('input[type="file"]');null!=r&&(y=!0,r.click())}}else n(b)}function o(e){var t=e.dataTransfer,n=!1;n=t.types.indexOf?-1!==t.types.indexOf("Files"):t.types.contains("Files"),n&&e.target.classList.add("on-drag")}function s(e){e.target.classList.remove("on-drag")}function a(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"}function l(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("on-drag");var t=e.dataTransfer.files[0];p(/javascript/gi.test(t.type)?t:null)}function c(t){var n;switch(t.target.error.name){case"NotFoundError":n="File not found";break;case"NotReadableError":n="Unable to read file";break;case"AbortError":n="File read aborted";break;default:n="An error occured reading the file"}e.publish("notification:error",{level:1,message:n})}function u(t){e.publish("notification:info",{level:9,message:"File downloaded"});var n=g.result;f("file"),d(n)}function d(t){e.publish("codeinput:ready",{jsCode:t})}function p(e){var t=h.querySelector(".drop-target");b=e,null!=t&&(null==b?t.textContent="Selected file does not appear to be a javascript file. Click to select another file or try dropping another file.":t.textContent='"'+b.name+'" selected. Click to select another file or try dropping another file.')}function f(e){null!=window.ga&&ga("send","event","code-input","code-submit",e)}var h,m,b,g,y=!1,v=function(e,t){h=e,m=t};return v.prototype={init:function(){if(null!=h){if(null==window.FileReader){var e=document.getElementById("file-selector");return void(null!=e&&(e.parentNode.removeChild(e),e=null))}var t=h.querySelector(".drop-target");null!=t&&(t.addEventListener("dragenter",o),t.addEventListener("dragleave",s),t.addEventListener("dragover",a),t.addEventListener("drop",l)),t=h.querySelector('input[type="file"]'),null!=t&&t.addEventListener("change",i),t=h.querySelector('button[type="button"]'),t&&t.addEventListener("click",r)}}},v}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("DataStore",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.DataStore=t(e.Intermediary)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){for(var t=0,n=0,i=e.length;i>n;n++)t+=e[n].globalUsage;return t}function i(e){return t(e,function(t,n){for(var i={},r=0,o=n.version_list.length;o>r;r++){var s=n.version_list[r];(null==s.prefix||""===s.prefix)&&(s.prefix=n.prefix),i[n.version_list[r].version]=n.version_list[r]}e[t].version_list=i}),e}function r(e,t,n){var i={};return i.versions=[],i.fromVersion=e.version,i.versions.push(o(e,t,n)),i.support=e.support.substr(0,1).toLowerCase(),i.isMobileBrowser=t.isMobileBrowser,i}function o(e,t,n){var i,r=/d/i,o=/x/i,s=!1,a=e.support.match(/#(\d+)/),l=isNaN(t.global_usage)?0:t.global_usage;return o.test(e.support)&&(s=t.prefix),a&&a.length>=2&&(i="#note_"+n+"_"+a[1]),{disabled:r.test(e.support),era:t.era,globalUsage:l,needsPrefix:s,note:i,version:e.version}}function s(e){return null==e?null:(e=e.replace(/\[(.*?)]\((.*?)\)/g,function(e,t,n){return'<a href="'+n+'">'+t+"</a>"}),e=e.replace(/`(.*?)`/g,function(e,t){return'<code class="inline-code">'+t+"</code>"}))}function a(e,t){var n,i,r;if(null!=t&&0!==t.length){if(n={},null==e)e=[];else for(i=0,r=e.length;r>i;i++)n[e.url]=!0;for(i=0,r=t.length;r>i;i++)"poly"===t[i].type&&null==n[t[i].url]&&(n[t[i].url]=!0,e.push(t[i]))}}function l(e,n){var i={};return t(n,function(n,r){i[n]={},t(r.version_list,function(t,r){void 0===e[n]||void 0===e[n][t]?i[n][t]="y":i[n][t]=e[n][t]})}),i}function c(){t(g,function(e,i){t(i.stats,function(t,s){for(var a,l,c=[],u=0,d=s.length;d>u;u++){var p=s[u],f=/(?:a|n|p|u|y)/i,h=f.exec(p.support),m=h.length>0?h[0].toLowerCase():"u",g=b[t].version_list[p.version];null!=g&&(g.isMobileBrowser="mobile"===b[t].type,null==a?a=r(p,g,e):m!==a.support?(a.toVersion=l.version,a.totalGlobalUsage=n(a.versions),c.push(a),a=r(p,g,e)):a.versions.push(o(p,g,e)),l=p)}a.totalGlobalUsage=n(a.versions),a.toVersion=l.version,c.push(a),i.stats[t]=c})})}function u(){g={},y=0,b=i(v["/static/data/caniuse2.json"].agents),m(v["/static/data/caniuse2.json"].data),h(v["/static/data/additional.json"].data),c(),d()}function d(){var e=/poly(?:fill)/i,n=/code.google.com/i;t(g,function(t,i){if(null!=i.links&&i.links.length>0){for(var r=[],o=0,s=i.links.length;s>o;o++){var a=i.links[o];null!=a.type?"poly"===a.type&&r.push(a):(e.test(a.title)||n.test(a.url))&&r.push(a)}i.links=r}})}function p(e,n,i){var r=document.createElement("ol");if(t(i,function(t,n){var i=document.createElement("li");i.innerHTML=s(n),i.setAttribute("id","note_"+e+"_"+t),r.appendChild(i)}),0===r.children.length&&""===n)return null;var o=document.createElement("section"),a=document.createElement("h4");if(a.textContent="Notes",o.appendChild(a),""!==n)for(var l=n.match(/(^(.*?)(?:\n|\r))|((?:\n|\r)(.*?)(?:\n|\r)|(?:\n|\r)(.*?)$|^(.*?)$)/g),c=0,u=l.length;u>c;c++)if(null!=l[c]&&""!==l[c]&&0!==l[c].replace(/\s/g,"").length){var d=document.createElement("p");d.innerHTML=s(l[c]),o.appendChild(d)}return r.children.length>0&&o.appendChild(r),o.innerHTML}function f(e,n){var i={};return null!=n&&(e.stats=l(e.stats,n)),t(e.stats,function(e,n){var r=[];t(n,function(e,t){r.push({version:e,support:t})}),r.sort(function(e,t){return e=parseFloat(e.version),t=parseFloat(t.version),t>e?-1:e>t?1:0}),i[e]=r}),i}function h(e){t(e,function(e,t){null!=w[e]&&(null!=g[e]?a(g[e].links,t.links):(y++,g[e]=t,g[e].key=e,g[e].notes=p(e,t.notes,t.notes_by_num),g[e].stats=f(g[e],b),g[e].tests=w[e]))})}function m(e){t(e,function(e,t){(t.categories.indexOf("JS API")>-1||t.categories.indexOf("DOM")>-1||t.categories.indexOf("Canvas")>-1)&&null!=w[e]&&(y++,g[e]=t,g[e].key=e,g[e].notes=p(e,t.notes,t.notes_by_num),g[e].stats=f(g[e]),g[e].tests=w[e])})}var b,g,y,v,_=!1,w={queryselector:[/\.querySelector\s*(?:All)*\(/],getelementsbyclassname:[/\.getElementsByClassName\s*\(/],webworkers:[/new\s*Worker\s*\(/],hashchange:[/(\.onhashchange\s*=|\.addEventListener\s*\(\s*(\'|")hashchange(\'|"))/],sharedworkers:[/new\s*SharedWorker\s*\(/],canvas:[/\.getContext\s*\(\s*(?:\'|")2d(?:\'|")\s*\)/],"canvas-text":[/\.(?:strokeText\s*\(|fillText\s*\(|measureText\s*\()/],"namevalue-storage":[/(?:localStorage|sessionStorage)\./],"sql-storage":[/=\s(?:.*?)openDatabase\s*\(/],indexeddb:[/=\s(?:.*?)indexedDB/],eventsource:[/=\s*new\s*EventSource\s*\(/],"x-doc-messaging":[/(\.addEventListener\s*\(\s*(?:\'|")message(?:\'|")|\.postMessage\s*\()/],geolocation:[/navigator\.geolocation/],webgl:[/=\s*initWebGL\(/],shadowdom:[/\.createShadowRoot\s*\(\s*\)/],websockets:[/=\s*new\s*WebSocket\s*\(\s*\)/],"script-async":[/<\s*script\s*.*async.*?>/],cors:[/\.withCredentials\s*=\s*(\'|")?true(\'|")?/],json:[/JSON\.(?:parse|stringify)\s*\(/],classlist:[/\.classList\.(remove|add|toggle|contains)\s*\(/],notifications:[/=\s*new\s*Notification\s*\(/],stream:[/\.getUserMedia\s*\(/],touch:[/\.addEventListener\s*\(\s*(?:\'|")touch(?:start|end|move|cancel)(?:\'|")/],matchesselector:[/\.matches(Selector)?\s*\(\s*(?:\'|").*?\s*(?:\'|")\s*\)/],blobbuilder:[/(window\.(?:Moz|WebKit)?BlobBuilder|=\s*new\s*Blob\()/],createObjectURL:[/\.createObjectURL\s*\(/],rellist:[/\.relList/],typedarrays:[/=\s*new\s*((?:(?:Ui|I)nt)|Float)(?:8|16|32|64)?(?:Clamped)?Array\s*\(/],deviceorientation:[/\.DeviceOrientationEvent\s*\)|\.addEventListener\s*\(\s*(\'|")deviceorientation(\'|")\s*,/],"script-defer":[/<\s*script\s*.*defer.*?>/],"nav-timing":[/performance\.(?:timing|navigation)/],"audio-api":[/\.(?:AudioContext|webkitAudioContext)/],fullscreen:[/(?:ms|moz|webkit)?(?:r|R)equestFull(?:S|s)creen\s*\(.*?\)/],requestanimationframe:[/\.(?:webkit|moz)?(?:r|R)equestAnimationFrame/],matchmedia:[/\.matchMedia\s*\(/],getcomputedstyle:[/\.getComputedStyle\s*\(/],pagevisibility:[/(?:\'|")(?:moz|ms|webkit)?visibilitychange(?:\'|")/],pointer:[/(?:\.pointerType|\.pointerEnabled|pointer(?:down|up|cancel|move|over|out|enter|leave)|(?:got|lost)pointercapture)/],cryptography:[/\.(?:ms)?(?:c|C)rypto(?:\.subtle)?/],template:[/\.content(?:\s*(?:;|\,|\))|\.)/,/\.importNode\s*/],"channel-messaging":[/=\s*new\s*MessageChannel\s*\(\s*\)/],mutationobserver:[/=\s*new\s*MutationObserver\s*\(/],"canvas-blending":[/\.globalCompositeOperation\s*=/],clipboard:[/new\s*ClipboardEvent\s*\(|\.addEventListener\s*\(\s*(?:\'|")(before)?(?:copy|cut|paste)(?:\'|")/],rtcpeerconnection:[/\.(?:moz|webkit)?RTCPeerConnection/],vibration:[/\.vibrate\s*\(/],"web-speech":[/=\s*new\s*(?:webkit)SpeechRecognition\s*\(\s*\)/],"high-resolution-time":[/performance\.now\s*\(\s*\)/],"battery-status":[/\.(?:mozB|webkitB|b)?attery(?:\s*)(?:;)?/],"speech-synthesis":[/=\s*new\s*SpeechSynthesisUtterance\s*\(\s*\)/],"user-timing":[/performance\.(?:mark|clearMarks|measure|clearMeasure)\s*\(/],"ambient-light":[/\.addEventListener\s*\(\s*(?:\'|")devicelight(?:\'|")\s*,/],domcontentloaded:[/\.addEventListener\s*\(\s*(?:\'|")DOMContentLoaded(?:\'|")\s*,/],proximity:[/\.addEventListener\s*\(\s*(?:\'|")deviceproximity(?:\'|")\s*,/],gamepad:[/\.(?:webkitG|g)?etGamepads\s*\(\s*\)/],"font-loading":[/(?:\.fonts.(?:add|load|ready)\s*\(|new\s*FontFace\s*\()/],"screen-orientation":[/\.addEventListener\s*\(\s*(?:\'|")(?:moz|webkit|ms)?orientationchange(?:\'|")/],getrandomvalues:[/\.(?:ms)?(?:c|C)rypto.getRandomValues\s*\(/],"css-supports-api":[/CSS.supports\s*\(/],"atob-btoa":[/\.(?:atob|btoa)\s*\(/],imports:[/\.querySelector(?:All)?\s*\((?:\'|")link\[rel=(?:\'|")import(?:\'|")](?:\'|")/],"resource-timing":[/\.getEntriesByType\s*\(\s*(?:\'|")resource(?:\'|")\s*\)/],"web-animation":[/\S*\.animate\s*\(\s*(?:(?:\[(?:\s|\n|\r|\S|)*?\]|\S*)\s*,)(?:\s|\S|\r|\n)*?\)/],"custom-elements":[/(?:\S*?)\.registerElement\s*\(\s*(?:\'|")\S*?(?:\'|")/],filereader:[/=\s*new\s*FileReader\s*\(\s*\)/],filesystem:[/\.(?:r|webkitR)equestFileSystem/],fileapi:[/(?:\.dataTransfer|\.files(?:\[\d*?]|\.item|\.length|\s*;))/],promises:[/=\s*new\s*Promise\s*\(/],xhr2:[/(?:=\s*new\s*FormData\s*\()|(?:\.responseType\s*=\s*(?:\'|")(?:arraybuffer|blob|document|json|text)(?:\'|"))/],"obj-create":[/Object\.create\s*\(/],"obj-defineproperty":[/Object\.defineProperty\s*\(/],"obj-defineproperties":[/Object\.defineProperties\s*\(/],"obj-getprototypeof":[/Object\.getPrototypeOf\s*\(/],"obj-keys":[/Object\.keys\s*\(/],"obj-seal":[/Object\.seal\s*\(/],"obj-freeze":[/Object\.freeze\s*\(/],"obj-preventextensions":[/Object\.preventExtensions\s*\(/],"obj-issealed":[/Object\.isSealed\s*\(/],"obj-isfrozen":[/Object\.isFrozen\s*\(/],"obj-isextensible":[/Object\.isExtensible\s*\(/],"obj-getownpropertydesc":[/Object\.getOwnPropertyDescriptor\s*\(/],"obj-getownpropertynames":[/Object\.getOwnPropertyNames\s*\(/],"date-toisostring":[/\.toISOString\s(\(\s*)/],"date-now":[/Date\.now\s*\(\s*\)/],"array-isarray":[/Array\.isArray\s*\(/],"function-bind":[/\.bind\s*\(/],"string-trim":[/\.trim\s*\(\s*\)/],"array-indexof":[/\.indexOf\s*\(.*?(?:,.*?)?\s*\)/],"array-lastindexof":[/\.lastIndexOf\s*\(.*?(?:,.*?)?\s*\)/],"array-every":[/\.every\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-some":[/\.some\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-foreach":[/\.forEach\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-map":[/\.map\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-filter":[/\.filter\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-reduce":[/\.reduce\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-reduceRight":[/\.reduceRight\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"strict-mode":[/(?:\'|")use strict(?:\'|")/],eventtarget:[/\.(?:addEventListener|removeEventListener|dispatchEvent)/]};return{getAgents:function(){return b},getCategoryCount:function(){return y},getData:function(){return g},isReady:function(){return _},init:function(e){v=e,u(),_=!0}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("CodeAnalyzer",["DataStore","Intermediary"],t):"object"==typeof exports?module.exports=t(require("DataStore"),require("Intermediary")):e.CodeAnalyzer=t(e.DataStore,e.Intermediary)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function i(i){var o=r(i),s=e.getData(),a=[];return t.publish("notification:completed",{level:9,message:"Testing "+e.getCategoryCount()+" features"}),n(s,function(e,n){for(var i,r=0,s=n.tests.length;s>r&&(i=n.tests[r].test(o),i);r++);i&&(a.push(n),t.publish("notification:info",{level:1,message:"Detected the usage of "+n.title+" ("+e+")"}))}),a}function r(e){return e.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,"")}var o=function(e){this._options=e,this._code=null,this._fileName=null,this._matches=[]};return o.prototype={check:function(n,r){this._code=n,this._fileName=r,e.isReady()?(this._matches=i(n),t.publish("codeAnalyzed",{sender:this})):t.publish("notification:error",{level:1,message:"Make sure compatibility data is loaded before running the CodeAnalyzer"})},getFileName:function(){return this._fileName},getMatches:function(){return this._matches}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Reporter",[],t):"object"==typeof exports?module.exports=t():e.Reporter=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(f.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(t){var n=[];return e(t,function(e,t){n.push({key:e,title:t.browser.toLowerCase()})}),n.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),n}function i(e,t,n){var i=document.createElement("a"),r=document.createElement("li");i.appendChild(document.createTextNode(e)),i.setAttribute("href","#"+t),r.appendChild(i),n.appendChild(r)}function r(e,t){var n={},i=function(t){var n=document.createElement("a"),i=document.createElement("sup"),r=/\d+/,o=r.exec(t);n.setAttribute("href",t),n.setAttribute("title","Go to note "+o),n.appendChild(document.createTextNode(o)),i.appendChild(n),e.appendChild(i)};if(null!=t)if(Array.isArray(t))for(var r=0,o=t.length;o>r;r++){var s=t[r];null!=s.note&&null==n[s.note]&&(n[s.note]=!0,i(s.note))}else"object"==typeof t?null!=t.note&&i(t.note):"string"==typeof t&&i(t)}function o(t,n){e(t,function(e,t){for(var i=document.querySelectorAll("["+n+'="'+e+'"]'),r=0,o=i.length;o>r;r++)t?i[r].classList.remove("hidden"):i[r].classList.add("hidden")})}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e){var t=document.createElement("section"),n=document.createElement("h3"),i=document.createElement("p");if(""!==e.spec){var r=document.createElement("a");r.textContent=e.title,r.setAttribute("title","Go to specification"),r.setAttribute("href",e.spec),n.appendChild(r)}else n.textContent=e.title;return i.textContent=e.description,t.classList.add("report-section"),t.setAttribute("id",e.key),t.appendChild(n),t.appendChild(i),t}function l(e){var t=document.createElement("section"),n=document.createElement("ol"),i=document.createElement("h4");switch(t.classList.add("support-section"),e){case"n":i.appendChild(document.createTextNode("No support"));break;case"y":i.appendChild(document.createTextNode("Full support"));break;case"p":i.appendChild(document.createTextNode("Support through polyfill"));break;case"u":i.appendChild(document.createTextNode("Unknown support"));break;case"a":i.appendChild(document.createTextNode("Partial support"));break;default:i.appendChild(document.createTextNode("SUPPORT VALUE:"+e))}return t.setAttribute("data-support",e),t.appendChild(i),t.appendChild(n),{section:t,list:n,count:0,usage:0}}function c(e,t,n,i,o,s,a){var l,c,u,d,p=a[n],f=function(e,t){e.disabled&&(t.classList.add("disabled"),t.setAttribute("data-title","Feature disabled by default, needs to be enabled through a flag or similar action")),e.needsPrefix&&(t.classList.add("prefix"),t.setAttribute("data-title",'The prefix "'+e.needsPrefix+'" is required to use this feature'))};if(s){for(l=document.createElement("li"),o.fromVersion===o.toVersion?l.appendChild(document.createTextNode(i+" "+o.fromVersion)):l.appendChild(document.createTextNode(i+" "+o.fromVersion+" to "+o.toVersion)),l.setAttribute("data-browser",n),p||l.classList.add("hidden"),r(l,o.versions),o.isMobileBrowser&&l.classList.add("mobile-browser"),c=0,u=o.versions.length;u>c;c++)f(o.versions[c],l);t.appendChild(l)}else for(c=0,u=o.versions.length;u>c;c++)d=o.versions[c],l=document.createElement("li"),l.appendChild(document.createTextNode(i+" "+d.version)),null!=d.note&&r(l,d.note),o.isMobileBrowser&&l.classList.add("mobile-browser"),f(d,l),l.setAttribute("data-browser",n),p||l.classList.add("hidden"),t.appendChild(l)}function u(e){var t;if(null!=e)return t=document.createElement("section"),t.classList.add("report-notes"),t.innerHTML=e,t}function d(e){var t=document.createElement("section"),n=document.createElement("h3"),i=document.createElement("p");n.textContent="Congrats!",i.textContent="The code you provided did not contain anything that might give compatibility problems. Yeey! (or perhaps there is but went undetected, don't you feel better now?)",t.appendChild(n),t.appendChild(i),e.appendChild(t)}function p(e,t){for(var n=document.createElement("section"),i=document.createElement("h4"),r=document.createElement("ul"),o=/^http(?:s)?:\/\/(\S*?)\//,s=0,a=e.length;a>s;s++){var l=document.createElement("a"),c=document.createElement("li");l.appendChild(document.createTextNode(e[s].title)),l.setAttribute("href",e[s].url),c.appendChild(l),c.appendChild(document.createTextNode("["+e[s].url.match(o)[1]+"]")),r.appendChild(c)}1===e.length?i.appendChild(document.createTextNode("Polyfill script:")):i.appendChild(document.createTextNode("Polyfill scripts:")),n.appendChild(i),n.classList.add("polyfills"),n.appendChild(r),t.appendChild(n)}var f=function(e,i,r){this._element=e,this._options=t(i),this._agents=r,this._agentsArray=n(r),this._index=document.getElementById("index-list")};return f.options={groupVersions:!0,showFullySupported:!0,supportOrder:["u","n","p","a","x","d","y"]},f.prototype={_renderCategoryExt:function(e,t){var n,r,o,s=a(e),d={},f=this._agents,h=this._options;for(i(e.title,e.key,this._index),r=0,o=this._agentsArray.length;o>r;r++)for(var m=this._agentsArray[r].key,b=e.stats[m],g=0,y=b.length;y>g;g++){var v=b[g],_=v.support.substr(0,1).toLowerCase();null==d[_]&&(d[_]=l(_));var w=d[_].list;c(e.key,w,m,f[m].browser,v,h.groupVersions,t),d[_].usage+=v.totalGlobalUsage}for(r=0,o=this._options.supportOrder.length;o>r;r++){var C=this._options.supportOrder[r];if(null!=d[C]){var x=d[C].section.querySelector("h4");null!=x&&x.appendChild(document.createTextNode(" ("+d[C].usage.toFixed(1)+"% global browser share)")),s.appendChild(d[C].section)}}null!=d.p&&null!=e.links&&e.links.length>0&&p(e.links,s),null!=e.notes&&(n=u(e.notes),s.appendChild(n)),this._element.appendChild(s)},buildReport:function(e,t){if(null!=this._element){s(this._element),null!=this._index&&s(this._index),(null==e||0===e.length)&&d(this._element),e=e.sort(function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:0});for(var n=0,i=e.length;i>n;n++){var r=e[n];this._renderCategoryExt(r,t)}}},filterBrowsers:function(e){o(e,"data-browser")},filterSupportSections:function(e){o(e,"data-support")}},f}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("LocalStorage",[],t):"object"==typeof exports?module.exports=t():e.LocalStorage=t()}(this,function(){"use strict";function e(e){try{return JSON.parse(e)}catch(t){return e}}function t(e){return JSON.stringify(e)}var n=function(){this._enabled=!0,this.testAvailability(),Object.defineProperty(this,"enabled",{get:function(){return this._initialized&&this._enabled},set:function(e){this._enabled=e}}),Object.defineProperty(this,"isAvailable",{get:function(){return this._initialized},set:function(e){throw new Error("The property isAvailable on the LocalStorage object is read-only")}})};return n.prototype={clear:function(){if(this.isAvailable)try{localStorage.clear()}catch(e){this._initialized=!1}return this._initialized},get:function(t){if(!this.isAvailable)return null;try{return e(localStorage.getItem(t))}catch(n){return this._initialized=!1,null}},remove:function(e){if(this.isAvailable)try{localStorage.removeItem(e)}catch(t){this._initialized=!1}return this._initialized},set:function(e,n){if(!this.isAvailable)return!1;if(null==n)return this.remove(e);try{localStorage.setItem(e,t(n))}catch(i){this._initialized=!1}return this._initialized},testAvailability:function(){var e="__lsp__";try{localStorage.setItem(e,e),this._initialized=localStorage.getItem(e)===e,localStorage.removeItem(e)}catch(t){this._initialized=!1}return this._initialized}},n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Filter",["Intermediary","LocalStorage"],t):"object"==typeof exports?module.exports=t(require("Intermediary"),require("LocalStorage")):e.BrowserFilter=t(e.Intermediary,e.LocalStorage)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function i(e,t){var i={};return t=null!=t?t:r.options,n(t,function(e,t){i[e]=t}),n(e,function(e,t){void 0!==i[e]&&(i[e]=t)}),i}var r=function(e,t,n){this._element=e,this._options=i(t),this._options=i(n,this._options),this._consent=!1};return r.options={filter:{},storageKey:""},r.prototype={_onBeforeUnload:function(e){var n=new t;this._consent?n.isAvailable&&n.set(this._options.storageKey,this.getFilter(!0)):n.isAvailable&&n.remove(this._options.storageKey)},_onClickHandler:function(t){var n=t.target;"input"===n.tagName.toLowerCase()&&(n.hasAttribute("data-filter-value")?(this._options.filter[n.getAttribute("data-filter-value")]=n.checked,e.publish("filter:filter-changed",{sender:this._options.storageKey})):n.hasAttribute("data-consent")&&(this._consent=n.checked,e.publish("filter:consent-changed",{sender:this._options.storageKey})))},_onConsentChanged:function(e){if(e.sender!==this._options.storageKey){this._consent=!this._consent;var t=this._element.querySelector("[data-consent]");null!=t&&(t.checked=this._consent)}},attachClickHandler:function(){null!=this._element&&(this._element.addEventListener("click",this._onClickHandler.bind(this)),e.subscribe("filter:consent-changed",this._onConsentChanged,this))},attachOnBeforeUnload:function(){window.addEventListener("beforeunload",this._onBeforeUnload.bind(this))},getFilter:function(e){if(e){var t={};return n(this._options.filter,function(e,n){n&&(t[e]=!0)}),t}return this._options.filter},getFilterFromStorage:function(){var e=new t;if(e.isAvailable){var n=e.get(this._options.storageKey);null!=n&&(this._options.filter=n,this._consent=!0)}if(this._consent){var i=this._element.querySelector("[data-consent]");null!=i&&(i.checked=this._consent)}}},r}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("BrowserFilter",["Filter"],t):"object"==typeof exports?module.exports=t(require("Filter")):e.BrowserFilter=t(e.Filter)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){var n=[];return t(e,function(e,t){n.push({key:e,title:t.browser.toLowerCase()})}),n.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),n}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t,n,r){var o=document.getElementById("bf-desktop"),s=document.getElementById("bf-mobile");if(null!=o&&null!=s){i(o),i(s);for(var a=0,l=n.length;l>a;a++){var c=n[a].key,u=t[c],d=document.createElement("li"),p=document.createElement("input"),f=document.createElement("label"),h=document.createTextNode(u.browser);p.setAttribute("id","chkbox_bf_"+c),p.setAttribute("type","checkbox"),p.setAttribute("data-filter-value",c),r.filter[c]?p.checked=!0:r.filter[void 0===c]&&(r.filter[c]=!1),f.setAttribute("for","chkbox_bf_"+c),f.classList.add("toggle-button"),d.appendChild(p),f.appendChild(h),d.appendChild(f),"mobile"===u.type?s.appendChild(d):o.appendChild(d)}}}var o=function(t,n){e.call(this,t,o.options,n)};return o.prototype=Object.create(e.prototype),o.options={filter:{and_ch:!0,and_ff:!0,and_uc:!0,chrome:!0,firefox:!0,ie:!0,ios_saf:!0,op_mini:!0,opera:!0,safari:!0},storageKey:"jscc-browser-filter"},o.prototype.init=function(e){if(null!=this._element){this.attachOnBeforeUnload(),this.attachClickHandler(),this.getFilterFromStorage();var t=n(e);r(this._element,e,t,this._options)}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("ShowHide",[],t):"object"==typeof exports?module.exports=t():e.ShowHide=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(p.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(){var e,t=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",OTransition:"otransitionend",MozTransition:"transitionend",transition:"transitionend"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e];return d}function i(e,t){var n=document.querySelector("["+c.attrContainer+'="'+e+'"]'),i=document.querySelector("["+c.attrTrigger+'="'+e+'"]'),o=!t&&c.transitionEnd!==d;if(null!=n&&null!=i){if(n.classList.remove(c.cssOpened),n.classList.add(c.cssClosed),i.hasAttribute("data-sh-text-closed")){var a=document.createTextNode(i.getAttribute("data-sh-text-closed"));i.textContent=a.textContent}i.classList.remove(c.cssActiveTrigger),n.classList.remove(c.cssTransition),u&&o?(n.addEventListener(c.transitionEnd,s),n.style.maxHeight=n.offsetHeight+"px",setTimeout(function(){n.classList.add(c.cssTransition),n.style.maxHeight=r(n)+"px"},10)):(n.style.maxHeight=r(n)+"px",setTimeout(function(){c.transitionEnd===d?l(n):n.classList.add(c.cssTransition)},10))}}function r(e){var t,n=e.querySelector("["+c.attrTrigger+"]"),i=0;if(t=window.getComputedStyle(e),null!=n){for(;n.parentNode!==e;)n=n.parentNode;t=window.getComputedStyle(n),"absolute"!==t.position&&(i+=n.offsetHeight,i+=parseInt(t["margin-bottom"],10)+parseInt(t["margin-top"],10))}return t=window.getComputedStyle(e),"border-box"===t["box-sizing"]&&(i+=parseInt(t["border-bottom-width"],10)+parseInt(t["border-top-width"],10)),i}function o(e){var t=e.target,n=t.getAttribute(c.attrTrigger),r=document.querySelector("["+c.attrContainer+'="'+n+'"]');if(null!=r)if(r.classList.contains(c.cssClosed)){if(a(n),t.hasAttribute("data-sh-group"))for(var o=document.querySelectorAll('[data-sh-group="'+t.getAttribute("data-sh-group")+'"]'),s=0,l=o.length;l>s;s++){var u=o[s];if(u!==t){var d=document.querySelector("["+c.attrContainer+'="'+u.getAttribute(c.attrTrigger)+'"]');if(d.classList.contains(c.cssOpened)){i(u.getAttribute(c.attrTrigger));break}}}}else i(n)}function s(e){var t=e.currentTarget;t.removeEventListener(c.transitionEnd,s),l(t)}function a(e,t){var n=document.querySelector("["+c.attrContainer+'="'+e+'"]'),i=n.querySelector("["+c.attrContent+"]"),o=document.querySelector("["+c.attrTrigger+'="'+e+'"]'),a=!t&&c.transitionEnd!==d;if(null!=n&&null!=i&&null!=o){if(t=void 0===t?!1:t,n.classList.remove(c.cssClosed),n.classList.add(c.cssOpened),o.hasAttribute("data-sh-text-opened")){var u=document.createTextNode(o.getAttribute("data-sh-text-opened"));o.textContent=u.textContent}o.classList.add(c.cssActiveTrigger),n.classList.remove(c.cssTransition),i.style.display="block",n.style.maxHeight=r(n)+"px",setTimeout(function(){a&&(n.addEventListener(c.transitionEnd,s),n.classList.add(c.cssTransition)),n.style.maxHeight=i.offsetHeight+r(n)+"px",a||l(n)},10)}}function l(e){if(null!=e){if(e.classList.contains(c.cssClosed)){var t=e.querySelector("["+c.attrContent+"]");null!=t&&(t.style.display="none")}e.classList.contains(c.cssTransition)?(e.classList.remove(c.cssTransition),
setTimeout(function(){e.style.removeProperty("max-height"),setTimeout(function(){e.classList.add(c.cssTransition)},10)},10)):e.style.removeProperty("max-height")}}var c,u=!1,d="no-transitions",p=function(e){c=t(e),c.transitionEnd=n()};return p.options={attrContent:"data-sh-content",attrContainer:"data-sh-container",attrOpenOnInit:"data-sh-open",attrTrigger:"data-sh-trigger",cssActiveTrigger:"active-trigger",cssClosed:"closed",cssOpened:"opened",cssTransition:"transition"},p.prototype={hideDetailView:function(e,t){var n=document.querySelector("["+c.attrContainer+'="'+e+'"]');null==n||n.classList.contains(c.cssClosed)||i(e,t)},init:function(e,t){t=t||{};for(var n=document.querySelectorAll("["+c.attrTrigger+"]"),r=0,s=n.length;s>r;r++){var l=n[r],d=l.getAttribute(c.attrTrigger),p=document.querySelector("["+c.attrContainer+'="'+d+'"]');null!=p&&(l.addEventListener("click",o),"1"===p.getAttribute(c.attrOpenOnInit)?(p.removeAttribute(c.attrOpenOnInit),a(d,!0)):i(d,!0),null!=e&&e.call(t,{id:d}))}u=!0,document.documentElement.classList.remove("no-read-more")},replaceTrigger:function(e,t){if(null!=t&&t.hasAttribute(c.attrTrigger)){var n=document.querySelector("["+c.attrTrigger+'="'+e+'"]');null!=n&&null!=t&&(n.removeEventListener("click",o),t.addEventListener("click",o),n.parentNode.replaceChild(t,n),n=null)}},showDetailView:function(e,t){var n=document.querySelector("["+c.attrContainer+'="'+e+'"]');null==n||n.classList.contains(c.cssOpened)||a(e,t)}},p}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("ScrollTo",[],t):"object"==typeof exports?module.exports=t():e.ScrollTo=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(b.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(){window.scrollTo(0,r(f,m,p,h.maxIterations)),f++,f<=h.maxIterations&&g(function(){n()})}function i(){for(var e,t=document.querySelectorAll('a[href^="#"]'),n=0,i=t.length;i>n;n++)e=t[n],e.hasAttribute(h.attrIgnoreAnchor)||e.addEventListener("click",l)}function r(e,t,n,i){return n*(Math.pow(e/i-1,3)+1)+t}function o(){var e=(document.documentElement||document.body).scrollHeight,t=(document.documentElement||document.body).offsetHeight,n=(document.documentElement||document.body).clientHeight;return Math.max(e,t,n)}function s(){return(document.documentElement||document.body).clientHeight}function a(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function l(e){var t=e.currentTarget?e.currentTarget:e.srcElement;if(null!=t){var n=document.querySelector(t.getAttribute("href"));if(null!=n){var i=0;t.hasAttribute("data-no-correction")||(i=h.correction),setTimeout(function(){u(a(),n.getBoundingClientRect().top+i)},10),e.preventDefault()}}}function c(e){if(d){var t=s();a()>t/h.topThresholdRatio?d.classList.remove(h.cssScrollTopDisabled):d.classList.add(h.cssScrollTopDisabled)}}function u(e,t){var i=o()-s(),r=e+t;r>i?t=i-e:0>r&&(t=-e),m=e,p=t,f=0,n()}var d,p,f,h,m,b=function(e){h=t(e)};b.options={attrIgnoreAnchor:"data-scrolltop-ignore",correction:0,cssScrollTopDisabled:"not-available",maxIterations:50,queryScrollTop:".scroll-to-top",topThresholdRatio:3};var g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return b.prototype={init:function(){d=document.querySelector(h.queryScrollTop),d&&window.addEventListener("scroll",c),i()},scrollToElement:function(e){u(a(),e.getBoundingClientRect().top)}},b}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("StickyHeader",[],t):"object"==typeof exports?module.exports=t():e.StickyHeader=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(i.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},i=function(e,n){this._element=e,this._options=t(n),this._isFixed=!1};return i.options={cssFixed:"fixed",queryHeader:"#widget-report-header"},i.prototype={_checkElementPosition:function(){var e=this._element.getBoundingClientRect();e.top<0&&!this._isFixed?(this._isFixed=!0,this._header.classList.add(this._options.cssFixed)):e.top>=0&&this._isFixed&&(this._isFixed=!1,this._header.classList.remove(this._options.cssFixed))},_onScrollWindow:function(e){n(this.checkHandler)},init:function(){this._header=document.querySelector(this._options.queryHeader),null!=this._element&&null!=this._header&&(this.checkHandler=this._checkElementPosition.bind(this),window.addEventListener("scroll",this._onScrollWindow.bind(this)),this._checkElementPosition())}},i}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("SupportFilter",["Filter"],t):"object"==typeof exports?module.exports=t(require("Filter")):e.SupportFilter=t(e.Filter)}(this,function(e){"use strict";function t(e,t,n){var i=document.getElementById("support-filter");if(null!=i)for(var r=0,o=n.length;o>r;r++)if(t.filter[n[r]]){var s=e.querySelector('[data-filter-value="'+n[r]+'"]');null!=s&&(s.checked=!0)}else t.filter[n[r]]=!1}var n=function(t,i){e.call(this,t,n.options,i),this._keys=["u","n","a","p","y"]};return n.prototype=Object.create(e.prototype),n.options={filter:{u:!0,n:!0,a:!0,p:!0,y:!0},storageKey:"jscc-support-filter"},n.prototype.init=function(){null!=this._element&&(this.attachOnBeforeUnload(),this.attachClickHandler(),this.getFilterFromStorage(),t(this._element,this._options,this._keys))},n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Ajax",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.Ajax=t(e.Intermediary)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){var n={};return t(o.options,function(e,t){n[e]=t}),t(e,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function i(e){null!=e&&clearTimeout(e)}function r(e,t,n){null!=t&&"function"==typeof t&&t.call({},{error:e,url:n})}var o=function(e){this._options=n(e)};return o.options={callbackOnError:null,callbackOnSuccess:null,timeout:5e3},o.prototype={_onError:function(){this._clearTimeout(this._timeoutId),r(event.target.status,this._options.callbackOnError,this._url)},_onLoad:function(){i(this._timeoutId);var e;if(this._request.status>=200&&this._request.status<400&&this._options.callbackOnSuccess){var t=this._request.getResponseHeader("Content-Type"),n=/json/gi;if(n.test(t))try{e=JSON.parse(this._request.response)}catch(r){e=this._request.responseText}else e=this._request.responseText;this._options.callbackOnSuccess.call({},{url:this._url,result:e})}},onTimeout:function(){this._request.readyState<4&&this._request.abort(),this._timeoutId=null},makeRequest:function(e){this._url=e,this._request=new XMLHttpRequest,this._request.open("GET",e,!0),this._request.addEventListener("load",this._onLoad.bind(this)),this._request.addEventListener("error",this._onError.bind(this)),this._timeoutId=setTimeout(this._onTimeout,this._options.timeout),this._request.send()}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("AjaxLoader",["Intermediary","Ajax"],t):"object"==typeof exports?module.exports=t(require("Intermediary"),require("Ajax")):e.AjaxLoader=t(e.Intermediary,e.Ajax)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var i=function(e){this._options=e,this._attempts=0,this._callCount=0,this._isReady=!1};return i.prototype={_loadData:function(){var i=this;this._isReady=!1,this._attempts++,n(this._sources,function(n){if(null==i._sources[n]){i._callCount++;var r=new t({callbackOnSuccess:i._onAjaxSuccess.bind(i),callbackOnError:i._onAjaxError.bind(i)});e.publish("notification:info",{level:9,message:'Downloading compatibility data from "'+n+'" (attempt '+i._attempts+")."}),r.makeRequest(n)}})},_onAjaxError:function(t){this._callCount--,e.publish("dataloader:download-failed",{level:1,message:"Unable to download compatibility data from ("+t.url+")",error:t}),this._onCallCompleted()},_onAjaxSuccess:function(t){e.publish("notification:info",{level:9,message:'Compatibility data from "'+t.url+'" downloaded.'}),this._callCount--,this._sources[t.url]=t.result,this._onCallCompleted()},_onCallCompleted:function(){if(0===this._callCount){var t=!1;n(this._sources,function(e,n){null==n&&(t=!0)}),t?this._attempts<5?this._loadData():e.publish("dataloader:too-many-attempts"):(this._isReady=!0,e.publish("dataloader:download-completed",{level:9,message:"Compatibility data successfully downloaded"}))}},getData:function(){return this._sources},isReady:function(){return this._isReady},loadData:function(e){this._isReady=!1,this._sources=e,this._attempts=0,this._loadData()}},i}),require.config({baseUrl:"/static/js",paths:{Intermediary:"vendor/Intermediary"}}),require(["Intermediary","CodeInput","CodeAnalyzer","Reporter","DataStore","BrowserFilter","ShowHide","ScrollTo","StickyHeader","SupportFilter","AjaxLoader"],function(e,t,n,i,r,o,s,a,l,c,u){"use strict";function d(e){var t=document.createElement("li"),n=new Date;t.textContent=("0"+n.getHours()).substr(-2)+":"+("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("00"+n.getMilliseconds()).substr(-3)+" - "+e,F.insertBefore(t,F.firstChild)}function p(e,t){if("notification:clear"===t)for(;F.firstChild;)F.removeChild(F.firstChild);else d(e.message)}function f(t){null==C&&(C=new n),r.isReady()?C.check(t.jsCode):(O=t.jsCode,x=new u,T=e.subscribe("dataloader",m),x.loadData(R))}function h(e){d("Code analysis completed"),y(),null==L&&(L=new s,L.init()),null==k&&(k=new l(document.getElementById("report")),k.init());var t=document.getElementById("widget-report");E=new i(document.getElementById("report-output"),{showFullySupported:!1},r.getAgents()),E.buildReport(C.getMatches(),S.getFilter()),E.filterSupportSections(A.getFilter()),t.classList.remove("hidden"),w=new a(I),w.init(),w.scrollToElement(document.getElementById("report"))}function m(t,n){var i=!1;switch(n){case"dataloader:download-completed":r.init(x.getData()),C.check(O),O=null,i=!0;break;case"dataloader:too-many-attempts":d("Exhausted compatibility data download attempts. ("+n+")"),i=!0;break;default:d("Unable to download necessary data for analysis. ("+n+")")}i&&(e.unsubscribe("dataloader",T),T=null,x=null)}function b(e){switch(e.sender){case"jscc-browser-filter":E.filterBrowsers(S.getFilter());break;case"jscc-support-filter":E.filterSupportSections(A.getFilter())}}function g(e){"A"===e.target.nodeName.toUpperCase()&&L.hideDetailView("index",!0)}function y(){null==S&&(S=new o(document.getElementById("browser-filter")),S.init(r.getAgents())),null==A&&(A=new c(document.getElementById("support-filter")),A.init())}function v(){if(null==document.createElement("input").placeholder)for(var e=document.querySelectorAll("label > span"),t=0,n=e.length;n>t;t++)e[t].classList.remove("visually-hidden")}function _(){j.init(),e.subscribe("codeinput:ready",f),null!=F&&e.subscribe("notification",p),w=new a(I),w.init();var t=document.getElementById("index-list");null!=t&&t.addEventListener("click",g),e.subscribe("codeAnalyzed",h),e.subscribe("filter:filter-changed",b),v(),d("Reporting for duty")}var w,C,x,S,E,k,L,A,T,O,q=document.getElementById("code-input"),j=new t(q),F=document.querySelector(".notifications"),I={correction:-88,topThresholdRatio:2},R={"/static/data/additional.json":null,"/static/data/caniuse2.json":null};_()}),define("app",function(){});